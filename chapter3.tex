\chapter{Design}
In this Design section, I'll explain how and why I chose the Software Architecture I did, and what tools I used to develop Inhale. I won't go into the details, just enough so that the Design choices are justified.

\section{Architecture Choice}

As all of the datasets I'll be using for Inhale will be geographical datasets, meaning they all have a location attribute, it is imperative that they are displayed on a map. Trying to make any sense of a geographical dataset without seeing it on a familiar map is nearly impossible.\\



\subsection{ArcGIS by Esri}

ArcGIS is an incredibly powerful contextual tool for mapping and spatial reasoning. Its features are so well made that I initially thought using some form of this software would be the only viable solution. It allows you to produce good looking, user friendly maps with very few lines of code. It  also provides a mass of data processing tools, including hotspots analysis and data correlation.\\

Ultimately, I chose not to go with ArcGIS as it costs around Â£1200 for one license. However I also wanted to implement my own algorithms, using ArcGIS would not leave me with much to implement, and after all, this is a computer science project. I can see how ArcGIS could be incredibly useful for businesses and marketing/pr.

\subsection{Desktop Mapping Tools}

There are various desktop mapping tools available, even open source options that have a good variety of features. The main issue with this style of mapping software is it's expandability, accessibility and familiarity.\\

Although tools like MapSphere allow you to make 3rd party plugins to expand the standard application with your own features, the features you're given access to when developing those plugins is quite limited. I want the scope to be able to implement whatever I want. 
Being a desktop application, you're cutting down your potential users, not everyone wants to download an application, it feels too heavy and sluggish for modern users when you can access perfectly able maps from our pockets in the form of smartphone apps and websites. I wanted Inhale to be familiar to the user, I wanted to use controls people are used to using from their everyday use of Google Maps, Waze etc. All of the free desktop applications I tried felt very old and sluggish.\\

\subsection{Google Maps}

After playing around with ArcGIS and desktop mapping tools, I was aiming more towards a solution involving a dynamic mapping provider. Google Maps does not need an introduction. Google have an API that allows developers to implement their own features, toolbars and map tiles. The API can provide maps on various platforms from Android, iOS, javascript and more.\\

The biggest draw towards Google Maps is their places API, it allows you to search for establishments, geographic locations, or prominent points of interest in a well defined area around a point \cite{googlePlaces}. This would be incredibly useful for Inhale as once a hotspot is identified, you could search for nearby places that may be contributing to the symptoms in that area. The only problem here is that it's very difficult to implement a general approach to getting nearbly places that have an affect. Google sort their places by type, the types are aimed towards general public use. They're in categories such as art gallery, bakery, bank, pharmacy, hospital. Whilst it could be argued that you could count the number of commercial premises nearby, but I don't believe this is enough to provide any sort of answer to allergy hotspots.\\

Google Map's main downfall is the lack of customisability, it lacks some features compared to other mapping options.

If Google ever increase the number of categories, or maybe include more general options such as "industrial" or "factory" then it would definitely be the best option.\\

\subsection{Leaflet}

Leaflet is a javascript library for mobile-friendly interactive apps \cite{leaflet}. Leaflet is comparable to Google Maps in that it has many of the same features. Leaflet is open source, has many third party plugins with a thriving community contributing daily towards building a versatile dynamic mapping tool.\\

I decided to use Leaflet for my project as it is the most customisable of all the options investigated so far. It allows me to develop whatever I want to, and make my map look exactly how I want.\\

One particular third party plugin that drew me towards Leaflet was heatmap.js. Heatmaps seem like the best way to present the results of a hotspot identification algorithm. After testing the built-in Google Maps heatmap, I was disappointed with both the speed and custom options available.\\

Leaflet was chosen because it can be used in a web format, it is very customisable and it has a lively community contributing to features all the time. I would be easy to add necessary features further down the line.

\section{Leaflet}

Talk about how you use leaflet.

So, once the data is ready to be displayed, you pass to leaflet as heatmap layer.

Deals with layers

Tiles - Simplicity - familiarity

\section{Development Tools}

Tableau

Chrome dev tools